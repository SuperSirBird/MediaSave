<html>
  <head>
    <title>MediaSave | Home</title>
    <style>
      body {margin:0;}
    </style>
  </head>
  <body>
    <canvas id="myCanvas"></canvas>
    <script>
      var t = 0;
      var vel = 0;
      var isloading = true;
      var c=document.getElementById("myCanvas");
      // Set dimensions
      c.width  = window.innerWidth;
      c.height = window.innerHeight;
      var ctx=c.getContext("2d");
      // Gradient
      var gradient = ctx.createLinearGradient(0,0,c.width,0);
gradient.addColorStop("0","#48C9B0");
gradient.addColorStop("1.0","#29B6F6");
      
      function home() {
        ctx.clearRect(0, 0, c.width, c.height);
        /* 
        MEDIA TITLE
        */
        // Background
        ctx.fillStyle = gradient;
        ctx.beginPath();
        ctx.rect(0,0,c.width,c.height/3); 
        ctx.fill();
        // Media
        ctx.fillStyle = "#fff";
        ctx.textAlign="center";
        ctx.font = "bolder 60px Calibri";
        ctx.fillText("MediaSave",c.width/2,(c.height/6)+30);
        
        /* 
        LOADER/NOT LOADING
        */
        if (isloading) {
          ctx.strokeStyle = gradient;
          ctx.lineWidth=10;
          ctx.beginPath();
          ctx.arc(c.width/2,c.height/1.5,40,((0+t)%2)*Math.PI,((1.5+t)%2)*Math.PI) 
          ctx.stroke();
        } else {}
      }
      
      // Mainloop
      setInterval(function(){home();vel+=0.1;t+=(1+Math.sin(vel))/30; }, 10);
      
      /*
      IP CONNECT TO SERVER
      */
      
      // Load timout
      setTimeout(function(){ isloading=false; }, 6000);
      var exampleSocket = new WebSocket('wss://localhost:9494', ['soap', 'xmpp']);

      // When the connection is open, send some data to the server
      exampleSocket.onopen = function () {
        exampleSocket.send('05'); 
      };

      // Log errors
      exampleSocket.onerror = function (error) {
        console.log('WebSocket Error ' + error);
      };

      // Log messages from the server
      exampleSocket.onmessage = function (e) {
        console.log('Server: ' + e.data);
      };
    </script>
  </body>
</html>
